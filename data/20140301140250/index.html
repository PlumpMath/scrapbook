<!DOCTYPE html>
<html lang="en" class="js video no-maskImage placeholder">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <title>Emacs for Python Programming - Vinod Kurup</title>
  <meta name="author" content="Vinod Kurup">

  
  <meta name="description" content="(Note: See the bottom of this post for updates) I was honored to to give my
“Emacs for Python Programming”
talk at the inaugural …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="http://www.kurup.org/blog/2012/10/24/emacs-for-python-programming">
  
  
  
  
  <link href="http://feeds.feedburner.com/vkurup" rel="alternate" title="Vinod Kurup" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->




<meta name="verify-v1" content="7VLvj7jbZMA24/73SZ9uUEq3SeBuiX3+aSIBRtgH4jQ=">
<link rel="openid.server" href="http://www.myopenid.com/server">
<link rel="openid.delegate" href="http://vkurup.myopenid.com/">
<link rel="openid2.local_id" href="http://vkurup.myopenid.com/">
<link rel="openid2.provider" href="http://www.myopenid.com/server">
<meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=vkurup.myopenid.com">

<link href="favicon.ico" rel="shortcut icon">

  
  



<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
<body>
  <header role="banner"><hgroup>
  <h1><a href="http://www.kurup.org/">Vinod Kurup</a></h1>
  
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/vkurup" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input name="q" value="site:www.kurup.org" type="hidden">
    <input value="" class="search" name="q" results="0" placeholder="Search" type="text">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://www.kurup.org/">» Blog</option><option value="http://www.kurup.org/about.html">» About Me</option><option value="http://www.kurup.org/blog/archives">» Archives</option><option value="http://www.kurup.org/blog/categories">» Categories</option><option value="http://www.kurup.org/medicine">» Medicine</option><option value="http://www.kurup.org/running">» Running</option><option value="http://feeds.feedburner.com/vkurup">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation" role="main-navigation">
  <li><a href="http://www.kurup.org/">Blog</a></li>
  <li><a href="http://www.kurup.org/about.html">About Me</a></li>
  <li><a href="http://www.kurup.org/blog/archives">Archives</a></li>
  <li><a href="http://www.kurup.org/blog/categories">Categories</a></li>
  <li><a href="http://www.kurup.org/medicine">Medicine</a></li>
  <li><a href="http://www.kurup.org/running">Running</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Emacs for Python Programming</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-24T16:45:49-04:00" pubdate="" data-updated="true">Oct 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>(Note: See the bottom of this post for updates)</p>

<p>I was honored to to give my
<a href="https://speakerdeck.com/vkurup/emacs-for-python-programming">“Emacs for Python Programming”</a>
talk at the inaugural <a href="http://pycarolinas.org/">PyCarolinas</a>
conference. The conference was a huge success in every way, thanks to
the efforts of <a href="http://www.ironfroggy.com/">Calvin Spealman</a>, et. al.
I promised that I would post my Emacs setup, so here it is.</p>

<h2>Step 0: Prerequisites</h2>

<p>This may work with other setups, but here’s what I tested:</p>

<ul>
<li>Linux</li>
<li>Emacs version 24</li>
<li>python 2.7 or 3.3</li>
<li><a href="http://pypi.python.org/pypi/pip">pip</a></li>
<li><a href="http://www.virtualenv.org/">virtualenv</a></li>
<li><a href="http://virtualenvwrapper.readthedocs.org/">virtualenvwrapper</a></li>
<li>git</li>
</ul>


<h2>Step 1: Clear out any previous customization</h2>

<p>As evidenced by the numerous blog posts documenting how to set this
up, it’s not straightforward. I recommend starting from scratch to
make sure everything is set up properly. Once you have it working,
then you can customize it. Make sure to start these commands in your
home directory.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vinod:~<span class="nv">$ </span>mkdir old-emacs
</span><span class="line">vinod:~<span class="nv">$ </span>mv .emacs .emacs.d old-emacs/
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 2: Set up initial Emacs configuration</h2>

<p>Create an empty <code>.emacs.d</code> directory and a subdirectory named with your
username. My username is <code>vinod</code>, so we’ll create a directory
structure called <code>.emacs.d/vinod/</code>. The emacs-starter-kit tells emacs
to automatically load any elisp files from that special directory, so
you’ll always have a place to drop custom elisp files.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vinod:~<span class="nv">$ </span>mkdir -p ~/.emacs.d/<span class="nv">$USER</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Create a file named <code>.emacs.d/init.el</code> with the following contents:</p>

<figure class="code"><figcaption><span>my-init.el</span><a href="https://gist.github.com/3948955">link</a></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
</pre></td><td class="code"><pre><code class="scm"><span class="line"><span class="p">(</span><span class="nf">require</span> <span class="ss">'package</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"marmalade"</span> <span class="o">.</span> <span class="s">"http://marmalade-repo.org/packages/"</span><span class="p">))</span>
</span><span class="line"><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">'package-archives</span> <span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span> <span class="o">.</span> <span class="s">"http://melpa.milkbox.net/packages/"</span><span class="p">))</span>
</span><span class="line"><span class="p">(</span><span class="nf">package-initialize</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">not </span><span class="nv">package-archive-contents</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">package-refresh-contents</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">defvar</span> <span class="nv">my-packages</span> <span class="o">'</span><span class="p">(</span><span class="nv">starter-kit</span>
</span><span class="line">                      <span class="nv">starter-kit-bindings</span>
</span><span class="line">                      <span class="nv">starter-kit-js</span>
</span><span class="line">                      <span class="nv">autopair</span>
</span><span class="line">                      <span class="nv">yasnippet</span>
</span><span class="line">                      <span class="nv">auto-complete</span>
</span><span class="line">                      <span class="nv">fuzzy</span><span class="p">)</span>
</span><span class="line">  <span class="s">"A list of packages to ensure are installed at launch."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">p</span> <span class="nv">my-packages</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">package-installed-p</span> <span class="nv">p</span><span class="p">))</span>
</span><span class="line">    <span class="p">(</span><span class="nf">package-install</span> <span class="nv">p</span><span class="p">)))</span>
</span><span class="line">
</span><span class="line"><span class="c1">;; autopair and yas in all modes</span>
</span><span class="line"><span class="p">(</span><span class="nf">autopair-global-mode</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c1">;; autocomplete</span>
</span><span class="line"><span class="p">(</span><span class="nf">require</span> <span class="ss">'auto-complete-config</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-dictionary-files</span> <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">".dict"</span><span class="p">)))</span>
</span><span class="line"><span class="p">(</span><span class="nf">ac-config-default</span><span class="p">)</span>
</span><span class="line"><span class="c1">;; hack to fix ac-sources after pycomplete.el breaks it</span>
</span><span class="line"><span class="p">(</span><span class="nf">add-hook</span> <span class="ss">'python-mode-hook</span>
</span><span class="line">          <span class="o">'</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
</span><span class="line">             <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-sources</span> <span class="o">'</span><span class="p">(</span><span class="nv">ac-source-pycomplete</span>
</span><span class="line">                                <span class="nv">ac-source-abbrev</span>
</span><span class="line">                                <span class="nv">ac-source-dictionary</span>
</span><span class="line">                                <span class="nv">ac-source-words-in-same-mode-buffers</span><span class="p">))))</span>
</span><span class="line">
</span><span class="line"><span class="c1">;; Set up python-mode</span>
</span><span class="line"><span class="p">(</span><span class="nf">setq</span> <span class="nv">py-install-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">esk-user-dir</span> <span class="s">"/python-mode.el-6.0.12/"</span><span class="p">))</span>
</span><span class="line"><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">'load-path</span> <span class="nv">py-install-directory</span><span class="p">)</span>
</span><span class="line"><span class="c1">;; this will show method signatures while typing</span>
</span><span class="line"><span class="p">(</span><span class="nf">setq</span> <span class="nv">py-set-complete-keymap-p</span> <span class="nv">t</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">require</span> <span class="ss">'python-mode</span><span class="p">)</span>
</span><span class="line"><span class="c1">;; activate the virtualenv where Pymacs is located</span>
</span><span class="line"><span class="p">(</span><span class="nf">virtualenv-workon</span> <span class="s">"default/"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="p">(</span><span class="nf">defun</span> <span class="nv">load-pycomplete</span> <span class="p">()</span>
</span><span class="line">  <span class="s">"Load and initialize pycomplete."</span>
</span><span class="line">  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">pyshell</span> <span class="p">(</span><span class="nf">py-choose-shell</span><span class="p">))</span>
</span><span class="line">         <span class="p">(</span><span class="nf">path</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">"PYTHONPATH"</span><span class="p">)))</span>
</span><span class="line">    <span class="p">(</span><span class="nf">setenv</span> <span class="s">"PYTHONPATH"</span> <span class="p">(</span><span class="nf">concat</span>
</span><span class="line">                          <span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">py-install-directory</span><span class="p">)</span> <span class="s">"completion"</span>
</span><span class="line">                          <span class="p">(</span><span class="k">if </span><span class="nv">path</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">path-separator</span> <span class="nv">path</span><span class="p">))))</span>
</span><span class="line">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">py-install-directory-check</span><span class="p">)</span>
</span><span class="line">        <span class="p">(</span><span class="nf">progn</span>
</span><span class="line">          <span class="p">(</span><span class="nf">setenv</span> <span class="s">"PYMACS_PYTHON"</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">string-match</span> <span class="s">"IP"</span> <span class="nv">pyshell</span><span class="p">)</span>
</span><span class="line">                                      <span class="s">"python"</span>
</span><span class="line">                                    <span class="nv">pyshell</span><span class="p">))</span>
</span><span class="line">          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">'pymacs-apply</span> <span class="s">"pymacs"</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">'pymacs-call</span> <span class="s">"pymacs"</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">'pymacs-eval</span> <span class="s">"pymacs"</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">'pymacs-exec</span> <span class="s">"pymacs"</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nf">autoload</span> <span class="ss">'pymacs-load</span> <span class="s">"pymacs"</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nb">load </span><span class="p">(</span><span class="nf">concat</span> <span class="nv">py-install-directory</span> <span class="s">"completion/pycomplete.el"</span><span class="p">)</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
</span><span class="line">          <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">'python-mode-hook</span> <span class="ss">'py-complete-initialize</span><span class="p">))</span>
</span><span class="line">      <span class="p">(</span><span class="nf">error</span> <span class="s">"`py-install-directory' not set, see INSTALL"</span><span class="p">))))</span>
</span><span class="line"><span class="p">(</span><span class="nf">eval-after-load</span> <span class="ss">'pymacs</span> <span class="o">'</span><span class="p">(</span><span class="nv">load-pycomplete</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="c1">;; pyflakes flymake integration</span>
</span><span class="line"><span class="c1">;; http://stackoverflow.com/a/1257306/347942</span>
</span><span class="line"><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">load </span><span class="s">"flymake"</span> <span class="nv">t</span><span class="p">)</span>
</span><span class="line">  <span class="p">(</span><span class="nf">defun</span> <span class="nv">flymake-pyflakes-init</span> <span class="p">()</span>
</span><span class="line">    <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">temp-file</span> <span class="p">(</span><span class="nf">flymake-init-create-temp-buffer-copy</span>
</span><span class="line">                       <span class="ss">'flymake-create-temp-inplace</span><span class="p">))</span>
</span><span class="line">           <span class="p">(</span><span class="nf">local-file</span> <span class="p">(</span><span class="nf">file-relative-name</span>
</span><span class="line">                        <span class="nv">temp-file</span>
</span><span class="line">                        <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
</span><span class="line">      <span class="p">(</span><span class="nb">list </span><span class="s">"pycheckers"</span> <span class="p">(</span><span class="nb">list </span><span class="nv">local-file</span><span class="p">))))</span>
</span><span class="line">  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">'flymake-allowed-file-name-masks</span>
</span><span class="line">               <span class="o">'</span><span class="p">(</span><span class="s">"\\.py\\'"</span> <span class="nv">flymake-pyflakes-init</span><span class="p">)))</span>
</span><span class="line"><span class="p">(</span><span class="nf">add-hook</span> <span class="ss">'python-mode-hook</span> <span class="ss">'flymake-mode</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c1">;; menu bar is useful when getting started</span>
</span><span class="line"><span class="p">(</span><span class="nf">menu-bar-mode</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span><span class="nf">setq-default</span> <span class="nv">default-tab-width</span> <span class="mi">4</span><span class="p">)</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 3: Create a python virtualenv</h2>

<p>We’ll keep all the python-side customization in a virtualenv named
<code>default</code>. It’s important that the name you choose is the same as the
name in the <code>(virtualenv-workon)</code> command in line 45 of Step 2.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vinod:~<span class="nv">$ </span>mkvirtualenv -p python2 default
</span></code></pre></td></tr></tbody></table></div></figure>


<p>After it does its thing, your shell prompt should change, indicating
that your new virtualenv is activated</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="err">$</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 4: Install Pymacs</h2>

<p><a href="http://pymacs.progiciels-bpi.ca/index.html">Pymacs</a> is a really cool
piece of software that sets up a 2 way communication between Emacs and
Python, allowing you to control Emacs with python commands rather than
elisp commands. It requires a python piece (<code>Pymacs.py</code>) and an Emacs
piece (<code>pymacs.el</code>). Unfortunately, they’re not installable via <code>pip</code>
or <code>package.el</code>, but installation is easy enough.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>mkdir src
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span><span class="nb">cd </span>src
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span>git clone git://github.com/pinard/Pymacs.git
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src<span class="nv">$ </span><span class="nb">cd </span>Pymacs
</span><span class="line">
</span><span class="line"><span class="c"># check to make sure tests pass</span>
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make check
</span><span class="line">
</span><span class="line"><span class="c"># install it (Be sure you're inside your virtualenv!)</span>
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make install
</span><span class="line">
</span><span class="line"><span class="c"># install the emacs extension</span>
</span><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>cp pymacs.el ~/.emacs.d/<span class="nv">$USER</span>/
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 5: Install other python packages</h2>

<p>These helper packages are easier to install:</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>pip install pyflakes pep8
</span></code></pre></td></tr></tbody></table></div></figure>


<p>The pyflakes and pep8 packages check your code as you type using
Emacs’ flymake mode. Now, deactivate your virtualenv.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>default<span class="o">)</span>vinod:~<span class="nv">$ </span>deactivate
</span><span class="line">vinod:~<span class="err">$</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 6: Install pycheckers</h2>

<p>Flymake is the part of Emacs that checks your code for errors on the
fly. It calls a shell script called <code>pycheckers</code>, so you need to have
a script by that name in your shell’s <code>PATH</code>. Here’s mine
(<code>~/bin/pycheckers</code>):</p>

<figure class="code"><figcaption><span>pycheckers.sh</span><a href="https://gist.github.com/3948973">link</a></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="c">#!/bin/bash</span>
</span><span class="line">
</span><span class="line">pyflakes <span class="s2">"$1"</span>
</span><span class="line">pep8 --repeat <span class="s2">"$1"</span>
</span><span class="line"><span class="nb">true</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 7: Install python-mode.el</h2>

<p>As I mentioned in my talk, there are multiple Python modes available,
but I recommend using the one named python-mode.el, which is developed
at
<a href="http://launchpad.net/python-mode">http://launchpad.net/python-mode</a>.
It does periodically get uploaded to
<a href="http://marmalade-repo.org/packages/python-mode">Marmalade</a>, but the
auto-completion using pycomplete doesn’t work well on the version that
is there now (6.0.10), so I recommend that you manually download and
install the latest stable version (6.0.12). I’ll update this post once
a stable working version gets uploaded to
<a href="http://marmalade-repo.org/">Marmalade</a> or
<a href="http://melpa.milkbox.net/">Melpa</a>.</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vinod:~<span class="nv">$ </span><span class="nb">cd</span> ~/.emacs.d/<span class="nv">$USER</span>
</span><span class="line">vinod:~/.emacs.d/vinod<span class="nv">$ </span>curl -L https://launchpad.net/python-mode/trunk/6.0.12/+download/python-mode.el-6.0.12.tar.gz | tar xz
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Step 8: Test it all out</h2>

<p>Launch emacs and open a python file named <code>test.py</code>. Type the following:</p>

<pre><code>import os
os.path.jo
</code></pre>

<p>Wait at this point. You should see auto-completion of <code>os.path.join</code>
followed shortly by a yellow popup showing documentation of that method.
Hitting return should accept the completion. Then type <code>(</code> and you
should see the method signature in the minibuffer.</p>

<p>Move the cursor over any letter in <code>join</code>. Hit ‘F1’. A window should
popup with the docstring for <code>os.path.join</code>. Hit ‘F2’. A new window
should be opened with the code for <code>os.path.join</code>. Hit ‘F3’. You’ll be
prompted to enter the name of any python command, and Emacs will show
you the docstring.</p>

<p>Type the string ‘blah’ and hit return. The string should be
highlighted in pink and if you mouseover it, the minibuffer will say
<code>undefined name 'blah'</code>. That’s flymake working for you.</p>

<p>Hit <code>C-c C-c</code> and the buffer should be sent to a Python interpreter and
you’ll be dropped in the REPL after the code has been loaded. Any
errors in the code will be reported.</p>

<p>If all of this works, then CONGRATULATIONS!!! If not, let me know and
I’ll see if I can help debug.</p>

<h2>Step 9: Customize</h2>

<p>All of this is customizable in hundreds of ways. Try <code>M-x
customize-group RET python-mode RET</code> to see how.</p>

<h2>Step 10: How to create a new python project</h2>

<p>Whenever you want to create a new Python project, you have do the
following:</p>

<h3>Create a new virtualenv</h3>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vinod:~<span class="nv">$ </span>mkvirtualenv newproject
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>Install pymacs into that virtualenv</h3>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>newproject<span class="o">)</span>vinod:~<span class="nv">$ </span><span class="nb">cd</span> ~/src/Pymacs
</span><span class="line"><span class="o">(</span>newproject<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>make install
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>Install the other pip modules</h3>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">(</span>newproject<span class="o">)</span>vinod:~/src/Pymacs<span class="nv">$ </span>pip install pyflakes pep8
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>Switch to that virtualenv in emacs</h3>

<pre><code>M-x virtualenv-workon RET newproject/ RET
</code></pre>

<h2>Issues</h2>

<h3>Changing virtualenvs doesn’t restart Pymacs</h3>

<p>For the most part, this won’t affect much, but if you move from a
Python2 project to a Python3 project, you may have problems. The
workaround is to call <code>M-x pymacs-terminate-services</code>, then <code>M-x
virtualenv-workon</code> to change your virtualenv, and then finally
<code>M-x load-pycomplete</code> to restart pymacs and pycomplete.</p>

<h3>Latest stable version of python-mode.el isn’t on Melpa</h3>

<p>I’d much prefer to just load python-mode using the built-in Emacs
package manager.</p>

<h3>Pymacs installation is harder than it needs to be</h3>

<p>I wish Pymacs could be installed by a 2 step process</p>

<ol>
<li>pip install Pymacs</li>
<li>M-x package-install RET pymacs RET</li>
</ol>


<h3>Which pycheckers to use?</h3>

<p>My script uses pep8 and pyflakes. There are a lot of other options out
there and I do not know which is best. See
<a href="http://stackoverflow.com/questions/1428872/pylint-pychecker-or-pyflakes">this post</a>
for more details.</p>

<h3>Not using ropemacs any more</h3>

<p>In my talk, I used ropemacs. In this setup, I have decided against it.
I was mostly using it for code-completion and documentation lookup,
but I like pycomplete.el better for those purposes. It’s included in
python-mode and it shows method signatures as you type. Ropemacs does
have other features such as project management (easily jumping to
files in the same project), and refactoring (changing variable names
throughout project). I haven’t used those, so I decided not to install
ropemacs.</p>

<h3>Project management not included</h3>

<p>I haven’t yet decided which package to use for this. I’ll probably try
projectile, but there are many other options, some lightweight
(ropemacs, eproject, pony-mode) and some heavyweight (ecb, CEDET).</p>

<h2>References</h2>

<p>I gleaned knowledge from all of the following, in no particular order.</p>

<ul>
<li><a href="http://slacy.com/blog/2011/03/pymacs-ropemacs-and-virtualenv-all-at-the-same-time/">Using Pymacs and virtualenv together (slacy.com)</a></li>
<li><a href="http://www.yilmazhuseyin.com/blog/dev/emacs-setup-python-development/">Using Ropemacs for autocompletion (yilmazhuseyin.com)</a></li>
<li><a href="http://stackoverflow.com/questions/2855378/ropemacs-usage-tutorial/2858148#2858148">How to use Rope to automatically change virtualenv for you</a></li>
<li><a href="http://almostobsolete.net/rope-and-virtualenv.html">Ropemacs and virtualenv (almostobsolete.net)</a></li>
<li><a href="http://www.rwdev.eu/articles/emacspyeng">The post that turned me on to pycomplete.el (rwdev.eu)</a></li>
<li><a href="http://hide1713.wordpress.com/2009/01/30/setup-perfect-python-environment-in-emacs/">Perfect Python Environment (2009)</a></li>
<li><a href="http://www.masteringemacs.org/articles/2010/10/04/beginners-guide-to-emacs/">Lot’s of great ‘advanced-beginner’ emacs tips</a></li>
<li><a href="http://blog.cou929.nu/setting-up-python-environment-on-emacs">Using python.el rather than python-mode.el</a></li>
<li><a href="http://pedrokroger.net/2010/07/configuring-emacs-as-a-python-ide-2/">Using IPython, pylookup and more (pedrokroger.net)</a> - I need to look into this post some more.</li>
<li><a href="http://emacswiki.org/emacs/PythonProgrammingInEmacs">EmacsWiki Python Page</a></li>
<li><a href="http://www.saltycrane.com/blog/2010/05/my-emacs-python-environment/">Python.el, ropemacs, and a little django tip at the end</a></li>
<li><a href="https://github.com/aculich/virtualenv.el">Virtualenv.el (something similar is included in python-mode.el</a></li>
<li><a href="https://github.com/pdee/pdee">Python Development Environment</a> -
Looks promising, just wish there was some documentation on how to
use it.</li>
<li><a href="http://borkware.com/rants/emacs-dev/">Emacs for Cocoa Development</a> - OK, not at all related to python, but some great insight from an Emacs (and all-around) wizard. Don’t miss the ranting at the end of the page.</li>
<li><a href="http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/">Python.el basics</a></li>
<li><a href="http://sunnyeves.blogspot.com/2011/04/debugging-python-on-emacs-ide.html">Using PDB in Emacs</a></li>
<li><a href="https://github.com/EnigmaCurry/emacs">Ryan McGuire’s .emacs.d</a></li>
<li><a href="http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/">AutoComplete for Python (enigmacurry.com)</a></li>
<li><a href="http://www.enigmacurry.com/2008/05/09/emacs-as-a-powerful-python-ide/">The original Python IDE post (enigmacurry.com)</a></li>
</ul>


<h2>Updates</h2>

<h4>2012-10-27</h4>

<p>Thanks to <a href="https://twitter.com/danpoirier">@danpoirier</a> and
<a href="http://twitter.com/gregnewman">@gregnewman</a> for testing. I initially
recommended using the master branch of python-mode.el, but now I
recommend using the latest stable release (as of now) which is version
6.0.12 to avoid problems loading Pymacs. There’s a bug on 6.0.12 with
<code>virtualenv-workon</code> that requires you to put a trailing slash after
the name of your virtualenv, so I’ve updated the <code>init.el</code> file above
to account for those changes.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Vinod Kurup</span></span>

      








  


<time datetime="2012-10-24T16:45:49-04:00" pubdate="" data-updated="true">Oct 24<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class="category" href="http://www.kurup.org/blog/categories/emacs/">emacs</a>, <a class="category" href="http://www.kurup.org/blog/categories/programming/">programming</a>, <a class="category" href="http://www.kurup.org/blog/categories/python/">python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.kurup.org/blog/2012/10/24/emacs-for-python-programming" data-via="vkurup" data-counturl="http://www.kurup.org/blog/2012/10/24/emacs-for-python-programming">Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://www.kurup.org/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet" title="Previous Post: Emacs Autocomplete stumbles on yasnippet">« Emacs Autocomplete stumbles on yasnippet</a>
      
      
        <a class="basic-alignment right" href="http://www.kurup.org/blog/2012/11/05/nsbrief-gets-the-best-guests" title="Next Post: NSBrief gets the best guests">NSBrief gets the best guests »</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe verticalscrolling="no" horizontalscrolling="no" src="index_1.html" style="width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 6059px ! important;" title="Disqus" tabindex="0" allowtransparency="true" data-disqus-uid="2" id="dsq-2" frameborder="0" scrolling="no" width="100%"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    <section class="first odd">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2013/01/21/peanut-allergy-a-personal-clinical-review">Peanut Allergy, a personal clinical review</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2013/01/17/priorities-and-gtd">Priorities and GTD</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2013/01/16/gtd-again">GTD again?</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2013/01/15/writing-paralysis">Writing paralysis</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2013/01/09/steal-my-web-app-idea">Steal My Web App Idea</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/12/30/how-to-change-the-rear-tire-on-a-12-inch-bicycle">How to change the rear tire on a 12 inch bicycle</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/11/05/nsbrief-gets-the-best-guests">NSBrief gets the best guests</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/10/24/emacs-for-python-programming">Emacs for Python Programming</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/10/15/emacs-autocomplete-stumbles-on-yasnippet">Emacs Autocomplete stumbles on yasnippet</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/10/14/ive-gone-to-the-dark-side">I've gone to the dark side</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/09/04/avik-arrives">Avik Arrives!</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/08/21/thoughts-on-free-will">Thoughts on Free Will</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/08/19/facebook-is-killing-blogging">Facebook is killing blogging</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/08/16/a-great-moment">A great moment</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/08/07/nasa-curiosity-lands">NASA Curiosity Lands</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2012/08/03/blogging-again">Blogging Again</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2011/11/29/factoring-large-numbers">On Factoring Large Numbers</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2011/11/12/clojurescript-and-phonegap">ClojureScript and PhoneGap</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2011/09/08/fixing-wireless-on-eeepc">Fixing wireless on eeePC</a>
      </li>
    
      <li class="post">
        <a href="http://www.kurup.org/blog/2011/09/06/surprise-im-40">Surprise, I'm 40!</a>
      </li>
    
  </ul>
</section>


<section class="even">
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  
  
  
    <a href="http://twitter.com/vkurup" class="twitter-follow-button" data-show-count="true">Follow @vkurup</a>
  
</section>


<section class="odd">
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll"><li class="pin-item"><p><a class="pin-title" href="http://www.youtube.com/watch?v=8SkdfdXWYaI&amp;feature=youtu.be">Using Python to Code by Voice - YouTube</a><span class="pin-description">Very impressive! Using Python to Code by Voice:  via @youtube</span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://www.caktusgroup.com/blog/2013/04/11/helper-script-runserver/">A helper script for runserver</a><span class="pin-description">A helper script for runserver </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://www.joelonsoftware.com/items/2007/10/26.html">Evidence Based Scheduling - Joel on Software</a><span class="pin-description">Software developers don’t really like to make schedules. Usually, they try to get away without one. “It’ll be done when it’s done!” they say, expecting that such a brave, funny zinger will reduce their boss to a fit of giggles, and in the ensuing joviality, the schedule will be forgotten. via Pocket</span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://zachholman.com/posts/only-90s-developers/">Only 90s Web Developers Remember This</a><span class="pin-description">RT @holman: Only 90s Web Developers will Remember This: 

&nbsp;&nbsp;&nbsp;&nbsp;Click to join my WebRing</span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://www.caktusgroup.com/portfolio/client/unicef/">UNICEF</a><span class="pin-description">RT @CaktusGroup: Our work w/ UNICEF referenced in Top 10 Most Innovative Companies!  More deets: </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://www.fastcompany.com/3026361/most-innovative-companies-2014/the-worlds-top-10-most-innovative-companies-in-local">The World's Top 10 Most Innovative Companies in Local | Fast Company | Business + Innovation</a><span class="pin-description">RT @CaktusGroup: Our work w/ UNICEF referenced in Top 10 Most Innovative Companies!  More deets: </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://python.org/">Welcome to Python.org</a><span class="pin-description">RT @juliaelman: I dunno about this whatsapp thing, but the new  sure is purty! #Python</span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:Python">Python</a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="http://www.npr.org/blogs/thesalt/2014/02/12/275376259/the-full-fat-paradox-whole-milk-may-keep-us-lean">The Full-Fat Paradox: Whole Milk May Keep Us Lean : The Salt : NPR</a><span class="pin-description">RT @NPRinskeep: Health advice is like the weather: if you don't like it, wait and it will change. Cool example from @AubreyNPRFood </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="https://gist.github.com/DanaDanger/8987422">gist:8987422</a><span class="pin-description">RT @DanaDanger: If APIs were implemented via business letter: </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:"></a> </p></li>

<li class="pin-item"><p><a class="pin-title" href="https://twitter.com/ebeattie1/status/433989206654730242/photo/1">Twitter / ebeattie1: Chapel Hill Kayak Team. #Necky ...</a><span class="pin-description">RT @ebeattie1: Chapel Hill Kayak Team. #Necky #REI #Kayaking </span>
 <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:REI">REI</a>  <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:Necky">Necky</a>  <a class="pin-tag" href="https://pinboard.in/u:vkurup/t:Kayaking">Kayaking</a> </p></li>
</ul>
  <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks »</a></p>
</section>





  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Some rights
  reserved</a> by <a rel="author" href="https://profiles.google.com/vvkurup/" title="View my Google Profile">Vinod Kurup</a> -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>
</p>

</footer>
  









  







</body>
</html>
